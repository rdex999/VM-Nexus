<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:Server.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:DataType="vm:DriveConnectionsViewModel" 
             x:Class="Server.Views.DriveConnectionsView">
	
	<Design.DataContext>
		<!-- This only sets the DataContext for the previewer in an IDE,
             to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
		<vm:DriveConnectionsViewModel />
	</Design.DataContext>	
	
	<UserControl.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceInclude Source="/Resources/Geometries.axaml"/>
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</UserControl.Resources>
	
	<UserControl.Styles>
		<StyleInclude Source="/Resources/Styles.axaml" />
	</UserControl.Styles>

	<Grid RowDefinitions="Auto, *">
		<Border Padding="8" Background="#f6f6f6">
			<StackPanel Spacing="10">
				<Grid RowDefinitions="Auto, Auto" ColumnDefinitions="Auto, Auto" HorizontalAlignment="Stretch" ColumnSpacing="12"
				      Margin="0, 0, 0, 0">
					<TextBox Watermark="Search by drive id, VM ID, owner ID, drive name, VM name, or owner username." BorderBrush="#a0a0a0"
					         MinWidth="580" MaxWidth="600" Text="{Binding Query}" />

					<Button Grid.Row="0" Grid.Column="1" CornerRadius="6" Command="{Binding RefreshCommand}">
						<PathIcon Data="{StaticResource ArrowClockwiseRegular}" Foreground="#303030" />
					</Button>
				</Grid>
				
				<Grid RowDefinitions="Auto, Auto" ColumnDefinitions="120, Auto, 220, Auto, 150, Auto, 185" RowSpacing="8"
				      ColumnSpacing="5" HorizontalAlignment="Left" Margin="13, 0, 0, 0">
					<TextBlock HorizontalAlignment="Center">Owner Username</TextBlock>
					<TextBlock Grid.Row="0" Grid.Column="1" HorizontalAlignment="Center">|</TextBlock>
					<TextBlock Grid.Row="0" Grid.Column="2" HorizontalAlignment="Center">Drive Name</TextBlock>
					<TextBlock Grid.Row="0" Grid.Column="3" HorizontalAlignment="Center">|</TextBlock>
					<TextBlock Grid.Row="0" Grid.Column="4" HorizontalAlignment="Center">Virtual Machine Name</TextBlock>
					<TextBlock Grid.Row="0" Grid.Column="5" HorizontalAlignment="Center">|</TextBlock>
					<TextBlock Grid.Row="0" Grid.Column="6" HorizontalAlignment="Center">Connected At</TextBlock>

					<TextBlock Grid.Row="1" Grid.Column="0" HorizontalAlignment="Center">Owner ID</TextBlock>
					<TextBlock Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center">|</TextBlock>
					<TextBlock Grid.Row="1" Grid.Column="2" HorizontalAlignment="Center">Drive ID</TextBlock>
					<TextBlock Grid.Row="1" Grid.Column="3" HorizontalAlignment="Center">|</TextBlock>
					<TextBlock Grid.Row="1" Grid.Column="4" HorizontalAlignment="Center">Virtual Machine ID</TextBlock>
					<TextBlock Grid.Row="1" Grid.Column="5" HorizontalAlignment="Center">|</TextBlock>
				</Grid>
			</StackPanel>
		</Border>
		
		<ScrollViewer Grid.Row="1" Margin="0, 5, 0, 0">
			<ItemsControl ItemsSource="{Binding DriveConnections}" HorizontalAlignment="Left">
				<ItemsControl.ItemTemplate>
					<DataTemplate DataType="vm:DriveConnectionItemTemplate">
						<Border Background="#efefef" CornerRadius="5" Padding="8" Margin="15, 8" BoxShadow="0 0 10 0 #c0c0c0">
							<Grid RowDefinitions="Auto, Auto" ColumnDefinitions="120, 220, 150, 185" ColumnSpacing="15" RowSpacing="8">
								<TextBlock HorizontalAlignment="Left" FontSize="16" Text="{Binding OwnerUsername}"/>
								<TextBlock Grid.Row="0" Grid.Column="1" HorizontalAlignment="Left" FontSize="16" Text="{Binding DriveName}"/>
								<TextBlock Grid.Row="0" Grid.Column="2" HorizontalAlignment="Left" FontSize="16" Text="{Binding VirtualMachineName}"/>
								<TextBlock Grid.Row="0" Grid.Column="3" HorizontalAlignment="Left" FontSize="16" Text="{Binding ConnectedAt}"/>
								
								<TextBlock Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left" FontSize="16" Text="{Binding OwnerId}"/>
								<TextBlock Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left" FontSize="16" Text="{Binding DriveId}"/>
								<TextBlock Grid.Row="1" Grid.Column="2" HorizontalAlignment="Left" FontSize="16" Text="{Binding VirtualMachineId}"/>
							</Grid>
						</Border>
					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</ScrollViewer>
	</Grid>
</UserControl>
