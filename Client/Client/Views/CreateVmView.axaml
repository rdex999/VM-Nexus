<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:Client.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Client.Views.CreateVmView"
             x:DataType="vm:CreateVmViewModel">

	<UserControl.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<MergeResourceInclude Source="/Resources/Geometries.axaml" />
				<MergeResourceInclude Source="/Resources/Colors.axaml" />
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</UserControl.Resources>

	<UserControl.Styles>
		<StyleInclude Source="/Resources/Styles.axaml" />
	</UserControl.Styles>

	<Grid RowDefinitions="Auto, *">
		<TextBlock HorizontalAlignment="Center" VerticalAlignment="Top" TextWrapping="Wrap" TextAlignment="Center"
		           Margin="0, 10, 0, 0" Padding="0" Classes="h2">
			Create a New Virtual Machine
		</TextBlock>

		<Border Grid.Row="1" HorizontalAlignment="Center" Width="400" Height="490"
		        Background="#d4eff1" CornerRadius="15" Padding="20">
			<StackPanel Spacing="25">
				<StackPanel>
					<TextBox Watermark="Name" Classes="form" Classes.error="{Binding VmNameErrorClass}"
					         Text="{Binding VmName}"
					         TextChanged="VmCreationInfoChangedTextAsync" />

					<TextBlock Classes="error" Text="{Binding VmNameErrorMessage}" />
				</StackPanel>

				<Grid ColumnDefinitions="*, Auto" ColumnSpacing="20">
					<TextBlock VerticalAlignment="Center" Classes="form">Operating System</TextBlock>
					<ComboBox Grid.Column="1" VerticalAlignment="Center" Width="190"
					          SelectedIndex="{Binding OperatingSystem}" SelectionChanged="OperatingSystemChangedAsync">
						<ComboBoxItem>Ubuntu</ComboBoxItem>
						<ComboBoxItem>Kali Linux</ComboBoxItem>
						<ComboBoxItem>Parrot OS</ComboBoxItem>
						<ComboBoxItem>Manjaro Linux</ComboBoxItem>
						<ComboBoxItem>
							<Grid ColumnDefinitions="*, Auto">
								<TextBlock Margin="0, 0, 20, 0" VerticalAlignment="Center">Mini Coffee OS</TextBlock>
								<Button Grid.Column="1" VerticalAlignment="Center" Padding="4">
									<PathIcon Data="{StaticResource QuestionRegular}" Width="12" Height="12" />
									<Button.Flyout>
										<Flyout Placement="Right" HorizontalOffset="20">
											<StackPanel>
												<TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" MaxWidth="300">
													A small MS-DOS like operating system I wrote in Assembly for the 8086 CPU.
												</TextBlock>
												<StackPanel Orientation="Horizontal">
													<TextBlock Text="See: " />
													<HyperlinkButton NavigateUri="https://github.com/rdex999/MiniCoffeeOS">https://github.com/rdex999/MiniCoffeeOS</HyperlinkButton>
												</StackPanel>
											</StackPanel>
										</Flyout>
									</Button.Flyout>
								</Button>
							</Grid>
						</ComboBoxItem>
						<ComboBoxItem>Other</ComboBoxItem>
					</ComboBox>
				</Grid>

				<Grid ColumnDefinitions="*, Auto">
					<TextBlock Classes="form" VerticalAlignment="Center"
					           Margin="0, 0, 10, 0">
						CPU Architecture
					</TextBlock>

					<ComboBox Grid.Column="1" VerticalAlignment="Center" Width="180"
					          SelectedIndex="{Binding CpuArchitecture}"
					          IsEnabled="{Binding CpuArchitectureIsEnabled}"
					          SelectionChanged="VmCreationInfoChangedComboBoxAsync">
						<ComboBoxItem>x86-64 (64 bit)</ComboBoxItem>
						<ComboBoxItem>x86 (32 bit)</ComboBoxItem>
						<ComboBoxItem>ARM</ComboBoxItem>
					</ComboBox>
				</Grid>

				<Grid ColumnDefinitions="*, Auto" ColumnSpacing="20">
					<TextBlock Classes="form" VerticalAlignment="Center" Margin="0, 0, 10, 0">Boot Mode</TextBlock>

					<ComboBox Grid.Column="1" VerticalAlignment="Center" Width="180"
					          SelectedIndex="{Binding BootMode}"
					          IsEnabled="{Binding BootModeIsEnabled}"
					          SelectionChanged="VmCreationInfoChangedComboBoxAsync">
						<ComboBoxItem>UEFI</ComboBoxItem>
						<ComboBoxItem>BIOS</ComboBoxItem>
					</ComboBox>
				</Grid>

				<Grid ColumnDefinitions="*, Auto" ColumnSpacing="20">
					<TextBlock Classes="form" VerticalAlignment="Center"
					           Margin="0, 0, 10, 0">
						OS drive type
					</TextBlock>

					<ComboBox Grid.Column="1" VerticalAlignment="Center" Width="180"
					          SelectedIndex="{Binding OsDriveType}"
					          IsEnabled="{Binding OsDriveTypeIsEnabled}"
					          SelectionChanged="VmCreationInfoChangedComboBoxAsync">
						<ComboBoxItem>NVMe (Non-Volatile Memory Express)</ComboBoxItem>
						<ComboBoxItem>SSD (Solid State Drive)</ComboBoxItem>
						<ComboBoxItem>HDD (Hard Disk Drive)</ComboBoxItem>
						<ComboBoxItem>CD-ROM</ComboBoxItem>
						<ComboBoxItem>Floppy Drive</ComboBoxItem>
					</ComboBox>
				</Grid>

				<StackPanel>
					<Grid ColumnDefinitions="*, Auto" ColumnSpacing="20">
						<TextBlock Classes="form" VerticalAlignment="Center"
						           Margin="0, 0, 10, 0">
							OS drive size (MiB)
						</TextBlock>

						<NumericUpDown Grid.Column="1" VerticalAlignment="Center"
						               Classes.error="{Binding OsDriveSizeErrorClass}"
						               ValueChanged="VmCreationInfoChangedNumericAsync"
						               Value="{Binding OsDriveSize}"
						               IsEnabled="{Binding OsDriveSizeIsEnabled}"
						               Increment="1024" Width="180" />
					</Grid>
					<TextBlock Classes="error" TextWrapping="Wrap" Text="{Binding OsDriveSizeErrorMessage}" />
				</StackPanel>

				<StackPanel Spacing="15">
					<TextBlock HorizontalAlignment="Center"
						Classes.success="{Binding VmCreationMessageSuccessClass}"
						Classes.error="{Binding !VmCreationMessageSuccessClass}"
						Text="{Binding VmCreationMessage}" />

					<Button VerticalAlignment="Bottom" HorizontalAlignment="Center" Classes="submit"
					        Margin="0, 0, 0, 15"
					        IsEnabled="{Binding CreateVmButtonIsEnabled}"
					        Command="{Binding CreateVirtualMachineCommand}">
						Create
					</Button>
				</StackPanel>
			</StackPanel>
		</Border>
	</Grid>
</UserControl>