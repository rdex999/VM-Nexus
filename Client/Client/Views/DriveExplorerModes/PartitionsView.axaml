<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:dem="clr-namespace:Client.ViewModels.DriveExplorerModes"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Client.Views.DriveExplorerModes.PartitionsView"
			 x:DataType="dem:PartitionsViewModel">
	
	<UserControl.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceInclude Source="/Resources/Colors.axaml" />
				<ResourceInclude Source="/Resources/Geometries.axaml" />
			</ResourceDictionary.MergedDictionaries>
		</ResourceDictionary>
	</UserControl.Resources>
	
	<ScrollViewer HorizontalScrollBarVisibility="Auto">
		<ItemsControl ItemsSource="{Binding Partitions}" Width="600" HorizontalAlignment="Left">
			<ItemsControl.ItemTemplate>
				<DataTemplate DataType="{x:Type dem:PartitionItemTemplate}">
					<Border CornerRadius="15" Background="{StaticResource DriveExplorerItem}" Height="100" Margin="10" Padding="10" 
					        BorderThickness="0.7" BoxShadow="0 0 15 0 #c0c0c0" DoubleTapped="OnPartitionDoubleTapped">
						<Border.Styles>
							<Style Selector="Border">
								<Setter Property="BorderBrush">
									<LinearGradientBrush StartPoint="0%, 0%" EndPoint="100%, 100%">
										<GradientStop Offset="0" Color="#bcd8dd" />
										<GradientStop Offset="1" Color="#c0e0e2" />
									</LinearGradientBrush>
								</Setter>
							</Style>
						</Border.Styles>
						
						<Grid ColumnDefinitions="Auto, *" ColumnSpacing="25">
							<Image Source="/Assets/Drive.png" Width="70" Height="70" RenderOptions.BitmapInterpolationMode="HighQuality"/>
							
							<Grid Grid.Column="1" RowDefinitions="Auto, *">
								<Grid ColumnDefinitions="*, 2*, 2*, 2*, Auto">
									<TextBlock Text="{Binding Index}" FontWeight="DemiBold"/>
									<TextBlock Grid.Column="1" Text="{Binding SizeMiBString}" FontWeight="DemiBold"/>
									<TextBlock Grid.Column="2" Text="{Binding Type}" />
									<TextBlock Grid.Column="3" Text="{Binding Label}" />
									
									<Button Grid.Column="4" VerticalAlignment="Top" Padding="4">
										<PathIcon Data="{StaticResource CaretDownRegular}" Width="16" Height="16" />

										<Button.Flyout>
											<MenuFlyout HorizontalOffset="8" Placement="RightEdgeAlignedTop">
												<MenuItem Header="Download" IsEnabled="{Binding CanDownload}"
												          Command="{Binding DownloadCommand}" />
											</MenuFlyout>
										</Button.Flyout>
									</Button>
								</Grid>
								
								<Button Grid.Row="1" HorizontalAlignment="Left" VerticalAlignment="Bottom" 
								        Padding="26, 6" Margin="0, 0, 50, 3" CornerRadius="10"
								        Background="#c7c7cc" FontWeight="Bold"
								        Command="{Binding OpenCommand}">
									<Button.Styles>
										<Style Selector="Button:pressed /template/ ContentPresenter#PART_ContentPresenter">
											<Setter Property="Background" Value="#a7a7ac"/>
										</Style>
									</Button.Styles>
									Open
								</Button>
							</Grid>
						</Grid>
					</Border>
				</DataTemplate>
			</ItemsControl.ItemTemplate>
		</ItemsControl>
	</ScrollViewer>
</UserControl>
